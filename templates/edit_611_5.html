{% extends "base.html" %}
{% block css %}

    {% load  static %}
    <link href={% static "plugins/bower_components/bootstrap-datepicker/bootstrap-datepicker.min.css" %} rel="stylesheet"
          type="text/css"/>
    <link href={% static "plugins/bower_components/custom-select/custom-select.css" %} rel="stylesheet"
          type="text/css"/>
    <link href={% static "plugins/bower_components/switchery/dist/switchery.min.css" %} rel="stylesheet"/>
    <link href={% static "plugins/bower_components/bootstrap-select/bootstrap-select.min.css" %} rel="stylesheet"/>
    <link href={% static "plugins/bower_components/bootstrap-tagsinput/dist/bootstrap-tagsinput.css" %} rel="stylesheet"/>
    <link href={% static "plugins/bower_components/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.min.css" %}
                  rel="stylesheet"/>
    <link href={% static "plugins/bower_components/multiselect/css/multi-select.css" %} rel="stylesheet"
          type="text/css"/>

    <style>
        label {
            text-align: left !important;
        }

        .card-a label {

        }

        {#标题分割线#}
        h3 {
            border-bottom: 1px solid rgba(120, 130, 140, 0.28);
            padding-bottom: 12px;
        }

        .done {
            background: #00c292
        }

        .need {
            background: #03a9f3 !important;
        }
    </style>




{% endblock %}
{% block breadcum %}
    <a href="{% url 'basedata' companies.street_district %}">{{ companies.street_district }}普查数据</a>
{% endblock %}
{% block content %}
    <div class="row">

        <ul class="wizard-steps" role="tablist">


            <li class="tab1 need  {% if companies.done_611 == True %} done {% endif %}" role="tab">
                <h4>
                    <a href="{% url 'edit_com' companies.street_district cid %}"><span>主表</span>611
                    </a>
                </h4>
            </li>

            <li class="tab1  {% if companies.need_611_1 == True %} need {% endif %}{% if companies.done_611_1 == True and companies.need_611_1 == True %} done {% endif %}"
                role="tab">
                <h4>
                    {% if companies.need_611_1 == False %} <span>1</span>611-1
                    {% endif %}
                    {% if companies.need_611_1 == True %}
                        <a href="{% url 'edit_611_1' cid %}"><span>1</span>611-1
                        </a>{% endif %}
                </h4>
            </li>


            <li class="tab2 {% if companies.need_611_2 == True %} need {% endif %}{% if companies.done_611_2 == True and companies.need_611_2 == True %} done {% endif %}"
                role="tab">
                <h4>
                    {% if companies.need_611_2 == False %} <span>2</span>611-2
                    {% endif %}
                    {% if companies.need_611_2 == True %}
                        <a href="{% url 'edit_611_2' cid %}"><span>2</span>611-2
                        </a>{% endif %}

                </h4>
            </li>
            <li class="tab3 {% if companies.need_611_3 == True %} need {% endif %}{% if companies.done_611_3 == True and companies.need_611_3 == True %} done {% endif %}"
                role="tab">
                <h4>
                    {% if companies.need_611_3 == False %} <span>3</span>611-3
                    {% endif %}
                    {% if companies.need_611_3 == True %}
                        <a href="{% url 'edit_611_3' cid %}"><span>3</span>611-3
                        </a>{% endif %}

                </h4>
            </li>
            <li class="tab4 {% if companies.need_611_4 == True %} need {% endif %}{% if companies.done_611_4 == True and companies.need_611_4 == True %} done {% endif %}"
                role="tab">
                <h4>
                    {% if companies.need_611_4 == False %} <span>4</span>611-4
                    {% endif %}
                    {% if companies.need_611_4 == True %}
                        <a href="{% url 'edit_611_4' cid %}"><span>4</span>611-4
                        </a>{% endif %}
                </h4>
            </li>
            <li class="tab5 now {% if companies.need_611_5 == True %} need {% endif %}{% if companies.done_611_5 == True and companies.need_611_5 == True %} done {% endif %}"
                role="tab">
                <h4>
                    {% if companies.need_611_5 == False %} <span>5</span>611-5{% endif %}
                    {% if companies.need_611_5 == True %}
                        <a href="{% url 'edit_611_5' cid %}"><span>5</span>611-5</a>{% endif %}
                </h4>
            </li>
            <li class="tab6 {% if companies.need_611_6 == True %} need {% endif %}{% if companies.done_611_6 == True and companies.need_611_6 == True %} done {% endif %}"
                role="tab">
                <h4>
                    {% if companies.need_611_6 == False %} <span>6</span>611-6{% endif %}
                    {% if companies.need_611_6 == True %}
                        <a href="{% url 'edit_611_6' cid %}"><span>6</span>611-6</a>{% endif %}
                </h4>
            </li>
        </ul>
        <form class="form-horizontal">
            <h3 class="box-title ">行政事业单位主要经济指标（2018）611-5</h3>
            <div class="col-md-6">
                <div class="disable-card">
                    <div class="form-group">
                        <label for="social_num" class="col-sm-6 control-label">统一社会信用代码</label>
                        <div class="col-sm-6">
                            <input type="text" class="form-control" id="social_num"
                                   name="social_num" value="{{ companies.social_num|default_if_none:"" }}"
                                   readonly>

                        </div>
                    </div>
                    <div class="form-group">
                        <label for="main_org_num" class="col-sm-6 control-label">组织机构代码</label>
                        <div class="col-sm-6">
                            <input type="text" class="form-control" id="main_org_num"
                                   name="main_org_num" value="{{ companies.org_num|default_if_none:"" }}"
                                   readonly>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="main_name" class="col-sm-6 control-label">单位详细名称</label>
                        <div class="col-sm-6">
                            <input type="text" class="form-control" id="main_name"
                                   name="main_name" value="{{ companies.name|default_if_none:"" }}" readonly>
                        </div>
                    </div>
                </div>
            </div>
        </form>
        <form class="form-horizontal" data-toggle="validator" id="base_form_611_5">{% csrf_token %}
            <input type="hidden" name="main_social_num" value="{{ cid }}">
            <div class="col-sm-12 white-box">
                <div class="">
                    <div class="col-md-6">
                        <div class="form-group">
                            <p>单位（元）</p>
                            <label for="inventory_early" class="col-sm-6 control-label">年初存货*</label>
                            <div class="col-sm-6">
                                <input type="number" class="form-control" id="inventory_early"
                                       placeholder="请输入" name="inventory_early"
                                       required data-error="必填项"
                                       value="{{ nationobj.inventory_early|default_if_none:"" }}">
                                <span class="help-block with-errors"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="current_assets" class="col-sm-6 control-label">流动资产合计*</label>
                            <div class="col-sm-6">
                                <input type="number" class="form-control" id="current_assets"
                                       placeholder="请输入" name="current_assets"
                                       required data-error="必填项"
                                       value="{{ nationobj.current_assets|default_if_none:"" }}">
                                <span class="help-block with-errors"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="inventory_current_assets" class="col-sm-6 control-label"
                                   style="padding-left: 100px">其中：存货*</label>
                            <div class="col-sm-6">
                                <input type="number" class="form-control" id="inventory_current_assets"
                                       placeholder="请输入" name="inventory_current_assets"
                                       required data-error="必填项"
                                       value="{{ nationobj.inventory_current_assets |default_if_none:"" }}">
                                <span class="help-block with-errors"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="permanent_investment" class="col-sm-6 control-label">长期投资*</label>
                            <div class="col-sm-6">
                                <input type="number" class="form-control" id="permanent_investment"
                                       placeholder="请输入" name="permanent_investment"
                                       required data-error="必填项"
                                       value="{{ nationobj.permanent_investment|default_if_none:"" }}">
                                <span class="help-block with-errors"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="original_price" class="col-sm-6 control-label">固定资产原价*</label>
                            <div class="col-sm-6">
                                <input type="number" class="form-control" id="original_price"
                                       placeholder="请输入" name="original_price"
                                       required data-error="必填项"
                                       value="{{ nationobj.original_price |default_if_none:"" }}">
                                <span class="help-block with-errors"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="area_building" class="col-sm-6 control-label" style="padding-left: 100px">其中：土地房屋和构筑物*</label>
                            <div class="col-sm-6">
                                <input type="number" class="form-control" id="area_building"
                                       placeholder="请输入" name="area_building"
                                       required data-error="必填项"
                                       value="{{ nationobj.area_building|default_if_none:"" }}">
                                <span class="help-block with-errors"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="machinery_equipment" class="col-sm-6 control-label" style="padding-left: 100px">其中：机器设备*</label>
                            <div class="col-sm-6">
                                <input type="number" class="form-control" id="machinery_equipment"
                                       placeholder="请输入" name="machinery_equipment"
                                       required data-error="必填项"
                                       value="{{ nationobj.machinery_equipment|default_if_none:"" }}">
                                <span class="help-block with-errors"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="transportation_equipment" class="col-sm-6 control-label"
                                   style="padding-left: 100px">其中：运输设备*</label>
                            <div class="col-sm-6">
                                <input type="number" class="form-control" id="transportation_equipment"
                                       placeholder="请输入" name="transportation_equipment"
                                       required data-error="必填项"
                                       value="{{ nationobj.transportation_equipment|default_if_none:"" }}">
                                <span class="help-block with-errors"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="building" class="col-sm-6 control-label">在建工程*</label>
                            <div class="col-sm-6">
                                <input type="number" class="form-control" id="building"
                                       placeholder="请输入" name="building"
                                       required data-error="必填项"
                                       value="{{ nationobj.building|default_if_none:"" }}">
                                <span class="help-block with-errors"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="intangible_assets_price" class="col-sm-6 control-label">无形资产原价*</label>
                            <div class="col-sm-6">
                                <input type="number" class="form-control" id="intangible_assets_price"
                                       placeholder="请输入" name="intangible_assets_price"
                                       required data-error="必填项"
                                       value="{{ nationobj.intangible_assets_price|default_if_none:"" }}">
                                <span class="help-block with-errors"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="land_tenure" class="col-sm-6 control-label" style="padding-left: 100px">其中：土地使用权*</label>
                            <div class="col-sm-6">
                                <input type="number" class="form-control" id="land_tenure"
                                       placeholder="请输入" name="land_tenure"
                                       required data-error="必填项"
                                       value="{{ nationobj.land_tenure |default_if_none:"" }}">
                                <span class="help-block with-errors"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="public_infrastructure" class="col-sm-6 control-label">公共设施原价*</label>
                            <div class="col-sm-6">
                                <input type="number" class="form-control" id="public_infrastructure"
                                       placeholder="请输入" name="public_infrastructure"
                                       required data-error="必填项"
                                       value="{{ nationobj.public_infrastructure|default_if_none:"" }}">
                                <span class="help-block with-errors"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="public_infrastructure_accumulated_depreciation" class="col-sm-6 control-label">公共设施累计折旧*</label>
                            <div class="col-sm-6">
                                <input type="number" class="form-control"
                                       id="public_infrastructure_accumulated_depreciation"
                                       placeholder="请输入" name="public_infrastructure_accumulated_depreciation"
                                       required data-error="必填项"
                                       value="{{ nationobj.public_infrastructure_accumulated_depreciation|default_if_none:"" }}">
                                <span class="help-block with-errors"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="total_assets" class="col-sm-6 control-label">资产总计*</label>
                            <div class="col-sm-6">
                                <input type="number" class="form-control" id="total_assets"
                                       placeholder="请输入" name="total_assets"
                                       required data-error="必填项"
                                       value="{{ nationobj.total_assets|default_if_none:"" }}">
                                <span class="help-block with-errors"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="total_liabilities" class="col-sm-6 control-label">负债合计*</label>
                            <div class="col-sm-6">
                                <input type="number" class="form-control" id="total_liabilities"
                                       placeholder="请输入" name="total_liabilities"
                                       required data-error="必填项"
                                       value="{{ nationobj.total_liabilities|default_if_none:"" }}">
                                <span class="help-block with-errors"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="total_net_asset" class="col-sm-6 control-label">净资产合计*</label>
                            <div class="col-sm-6">
                                <input type="number" class="form-control" id="total_net_asset"
                                       placeholder="请输入" name="total_net_asset"
                                       required data-error="必填项"
                                       value="{{ nationobj.total_net_asset|default_if_none:"" }}">
                                <span class="help-block with-errors"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="total_income" class="col-sm-6 control-label">本年收入合计*</label>
                            <div class="col-sm-6">
                                <input type="number" class="form-control" id="total_income"
                                       placeholder="请输入" name="total_income"
                                       required data-error="必填项"
                                       value="{{ nationobj.total_income|default_if_none:"" }}">
                                <span class="help-block with-errors"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="income_fiscal_appropriation" class="col-sm-6 control-label"
                                   style="padding-left: 50px">财政拨款收入*</label>
                            <div class="col-sm-6">
                                <input type="number" class="form-control" id="income_fiscal_appropriation"
                                       placeholder="请输入" name="income_fiscal_appropriation"
                                       required data-error="必填项"
                                       value="{{ nationobj.income_fiscal_appropriation |default_if_none:"" }}">
                                <span class="help-block with-errors"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="income_undertaking" class="col-sm-6 control-label" style="padding-left: 50px">事业收入*</label>
                            <div class="col-sm-6">
                                <input type="number" class="form-control" id="income_undertaking"
                                       placeholder="请输入" name="income_undertaking"
                                       required data-error="必填项"
                                       value="{{ nationobj.income_undertaking|default_if_none:"" }}">
                                <span class="help-block with-errors"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="income_manage" class="col-sm-6 control-label"
                                   style="padding-left: 50px">经营收入*</label>
                            <div class="col-sm-6">
                                <input type="number" class="form-control" id="income_manage"
                                       placeholder="请输入" name="income_manage"
                                       required data-error="必填项"
                                       value="{{ nationobj.income_manage|default_if_none:"" }}">
                                <span class="help-block with-errors"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="total_expend" class="col-sm-6 control-label">本年支出合计*</label>
                            <div class="col-sm-6">
                                <input type="number" class="form-control" id="total_expend"
                                       placeholder="请输入" name="total_expend"
                                       required data-error="必填项"
                                       value="{{ nationobj.total_expend|default_if_none:"" }}">
                                <span class="help-block with-errors"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="expend_salary" class="col-sm-6 control-label"
                                   style="padding-left: 50px">工资福利支出*</label>
                            <div class="col-sm-6">
                                <input type="number" class="form-control" id="expend_salary"
                                       placeholder="请输入" name="expend_salary"
                                       required data-error="必填项"
                                       value="{{ nationobj.expend_salary |default_if_none:"" }}">
                                <span class="help-block with-errors"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="expend_service" class="col-sm-6 control-label" style="padding-left: 50px">商品和服务支出*</label>
                            <div class="col-sm-6">
                                <input type="number" class="form-control" id="expend_service"
                                       placeholder="请输入" name="expend_service"
                                       required data-error="必填项"
                                       value="{{ nationobj.expend_service|default_if_none:"" }}">
                                <span class="help-block with-errors"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="expend_labour" class="col-sm-6 control-label" style="padding-left: 100px">其中：劳务费*</label>
                            <div class="col-sm-6">
                                <input type="number" class="form-control" id="expend_labour"
                                       placeholder="请输入" name="expend_labour"
                                       required data-error="必填项"
                                       value="{{ nationobj.expend_labour|default_if_none:"" }}">
                                <span class="help-block with-errors"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="expend_labor_union" class="col-sm-6 control-label" style="padding-left: 100px">其中：工会经费*</label>
                            <div class="col-sm-6">
                                <input type="number" class="form-control" id="expend_labor_union"
                                       placeholder="请输入" name="expend_labor_union"
                                       required data-error="必填项"
                                       value="{{ nationobj.expend_labor_union|default_if_none:"" }}">
                                <span class="help-block with-errors"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="expend_welfare" class="col-sm-6 control-label" style="padding-left: 100px">其中：福利费*</label>
                            <div class="col-sm-6">
                                <input type="number" class="form-control" id="expend_welfare"
                                       placeholder="请输入" name="expend_welfare"
                                       required data-error="必填项"
                                       value="{{ nationobj.expend_welfare|default_if_none:"" }}">
                                <span class="help-block with-errors"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="expend_taxes_additional" class="col-sm-6 control-label"
                                   style="padding-left: 100px">其中：税金及附加费用*</label>
                            <div class="col-sm-6">
                                <input type="number" class="form-control" id="expend_taxes_additional"
                                       placeholder="请输入" name="expend_taxes_additional"
                                       required data-error="必填项"
                                       value="{{ nationobj.expend_taxes_additional|default_if_none:"" }}">
                                <span class="help-block with-errors"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="expend_subsidy" class="col-sm-6 control-label" style="padding-left: 50px">对个人和家庭的补助*</label>
                            <div class="col-sm-6">
                                <input type="number" class="form-control" id="expend_subsidy"
                                       placeholder="请输入" name="expend_subsidy"
                                       required data-error="必填项"
                                       value="{{ nationobj.expend_subsidy|default_if_none:"" }}">
                                <span class="help-block with-errors"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="expend_retire" class="col-sm-6 control-label" style="padding-left: 100px">其中：退（离）休费*</label>
                            <div class="col-sm-6">
                                <input type="number" class="form-control" id="expend_retire"
                                       placeholder="请输入" name="expend_retire"
                                       required data-error="必填项"
                                       value="{{ nationobj.expend_retire|default_if_none:"" }}">
                                <span class="help-block with-errors"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="expend_medical" class="col-sm-6 control-label" style="padding-left: 100px">其中：医疗费补助*</label>
                            <div class="col-sm-6">
                                <input type="number" class="form-control" id="expend_medical"
                                       placeholder="请输入" name="expend_medical"
                                       required data-error="必填项"
                                       value="{{ nationobj.expend_medical|default_if_none:"" }}">
                                <span class="help-block with-errors"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="expend_management" class="col-sm-6 control-label" style="padding-left: 50px">经营支出*</label>
                            <div class="col-sm-6">
                                <input type="number" class="form-control" id="expend_management"
                                       placeholder="请输入" name="expend_management"
                                       required data-error="必填项"
                                       value="{{ nationobj.expend_management |default_if_none:"" }}">
                                <span class="help-block with-errors"></span>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            {% if  permission == True %}
                <div class="col-sm-12 white-box ">
                    <button type="submit" id="onClickButton"
                            class="btn  btn-default btn-outline btn-danger pull-right">提交
                    </button>
                    <div style="clear:both "></div>
                </div>
            {% endif %}
        </form>
    </div>



{% endblock %}

{% block js %}
    {% load static %}
    <script src= {% static  "plugins/bower_components/switchery/dist/switchery.min.js" %}></script>
    <script src={% static  "plugins/bower_components/custom-select/custom-select.min.js" %} type="text/javascript"></script>
    <script src={% static  "plugins/bower_components/bootstrap-select/bootstrap-select.min.js" %} type="text/javascript"></script>
    <script src={% static  "plugins/bower_components/bootstrap-tagsinput/dist/bootstrap-tagsinput.min.js" %}></script>
    <script src={% static  "plugins/bower_components/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.min.js" %}
                    type="text/javascript"></script>
    <script type="text/javascript"
            src={% static  "plugins/bower_components/multiselect/js/jquery.multi-select.js" %}></script>
    {#    <script src={% static "js/xianmeng/edit-com.js" %}></script>#}

    <script>
        jQuery(document).ready(function () {
            // Switchery
            var elems = Array.prototype.slice.call(document.querySelectorAll('.js-switch'));
            $('.js-switch').each(function () {
                new Switchery($(this)[0], $(this).data());

            });
            // For select 2

            $(".select2").select2();
            $('.selectpicker').selectpicker();

            //Bootstrap-TouchSpin
            $(".vertical-spin").TouchSpin({
                verticalbuttons: true,
                verticalupclass: 'ti-plus',
                verticaldownclass: 'ti-minus'
            });
            var vspinTrue = $(".vertical-spin").TouchSpin({
                verticalbuttons: true
            });
            if (vspinTrue) {
                $('.vertical-spin').prev('.bootstrap-touchspin-prefix').remove();
            }

            $("input[name='tch1']").TouchSpin({
                min: 0,
                max: 100,
                step: 0.1,
                decimals: 2,
                boostat: 5,
                maxboostedstep: 10,
                postfix: '%'
            });
            $("input[name='tch2']").TouchSpin({
                min: -1000000000,
                max: 1000000000,
                stepinterval: 50,
                maxboostedstep: 10000000,
                prefix: '$'
            });
            $("input[name='tch3']").TouchSpin();

            $("input[name='tch3_22']").TouchSpin({
                initval: 40
            });

            $("input[name='tch5']").TouchSpin({
                prefix: "pre",
                postfix: "post"
            });

            // For multiselect

            $('#pre-selected-options').multiSelect();
            $('#optgroup').multiSelect({selectableOptgroup: true});

            $('#public-methods').multiSelect();
            $('#select-all').click(function () {
                $('#public-methods').multiSelect('select_all');
                return false;
            });
            $('#deselect-all').click(function () {
                $('#public-methods').multiSelect('deselect_all');
                return false;
            });
            $('#refresh').on('click', function () {
                $('#public-methods').multiSelect('refresh');
                return false;
            });
            $('#add-option').on('click', function () {
                $('#public-methods').multiSelect('addOption', {value: 42, text: 'test 42', index: 0});
                return false;
            });

            $("#onClickButton").click(function () {

                var data = $("#base_form_611_5").serializeArray();
                var postData = {};
                for (var x in data) {
                    postData[data[x].name] = data[x].value;
                    if (data[x].value == '') {
                        if (data[x].name == 'social_num' || data[x].name == 'main_org_num') {

                        } else {
                            toastr.error("不能有空选项");
                            $("#" + data[x].name).parent().parent().addClass("has-error")
                            return false
                        }
                    }
                }
                console.log(data);
                // 审核关系

                //资产负债
                if (parseInt(postData.current_assets) < parseInt(postData.inventory_current_assets)) {
                    toastr.error("流动资产合计必须大于等于存货");
                    $("#current_assets").parent().parent().addClass("has-error")
                    $("#inventory_current_assets").parent().parent().addClass("has-error")
                    return false
                }
                if (parseInt(postData.original_price) < (parseInt(postData.area_building) + parseInt(postData.machinery_equipment) + parseInt(postData.transportation_equipment))) {
                    toastr.error("固定资产原价必须大于等于土地、房屋和构筑物，机器设备，运输设备之和");
                    $("#original_price").parent().parent().addClass("has-error")
                    $("#area_building").parent().parent().addClass("has-error")
                    $("#machinery_equipment").parent().parent().addClass("has-error")
                    $("#transportation_equipment").parent().parent().addClass("has-error")
                    $("#original_price").parent().parent().addClass("has-error")
                    return false
                }
                if (parseInt(postData.total_assets) < (parseInt(postData.current_assets) + parseInt(postData.original_price))) {
                    $("#total_assets").parent().parent().addClass("has-error")
                    $("#current_assets").parent().parent().addClass("has-error")
                    $("#original_price").parent().parent().addClass("has-error")
                    toastr.error("资产总计必须大于等于流动资产合计加固定资产原价");
                    return false
                }
                if (parseInt(postData.total_net_asset) != (parseInt(postData.total_assets) - parseInt(postData.total_liabilities))) {
                    $("#total_net_asset").parent().parent().addClass("has-error")
                    $("#total_assets").parent().parent().addClass("has-error")
                    $("#total_liabilities").parent().parent().addClass("has-error")
                    toastr.error("净资产合计必须等于资产合计-负债合计");
                    return false
                }

                //财务状况
                if (parseInt(postData.total_income) < parseInt(postData.income_fiscal_appropriation) + parseInt(postData.income_undertaking) + parseInt(postData.income_manage)) {
                    $("#total_income").parent().parent().addClass("has-error")
                    $("#income_fiscal_appropriation").parent().parent().addClass("has-error")
                    $("#income_undertaking").parent().parent().addClass("has-error")
                    $("#income_manage").parent().parent().addClass("has-error")
                    toastr.error("本年收入合计必须大于等于财政拨款收入，事业收入，经营收入之和");
                    return false
                }
                if (parseInt(postData.total_expend) < (parseInt(postData.expend_salary) + parseInt(postData.expend_service) + parseInt(postData.expend_subsidy))) {
                    $("#total_expend").parent().parent().addClass("has-error")
                    $("#expend_salary").parent().parent().addClass("has-error")
                    $("#expend_service").parent().parent().addClass("has-error")
                    $("#expend_subsidy").parent().parent().addClass("has-error")
                    toastr.error("本年支出合计必须大于等于工资福利支出，商品和服务支出，对个人家庭的补助之和");
                    return false
                }
                if (parseInt(postData.expend_service) < (parseInt(postData.expend_labour) + parseInt(postData.expend_labor_union) + parseInt(postData.expend_welfare) + parseInt(postData.expend_taxes_additional))) {
                    $("#expend_service").parent().parent().addClass("has-error")
                    $("#expend_labour").parent().parent().addClass("has-error")
                    $("#expend_labor_union").parent().parent().addClass("has-error")
                    $("#expend_welfare").parent().parent().addClass("has-error")
                    $("#expend_taxes_additional").parent().parent().addClass("has-error")
                    toastr.error("商品和服务支出必须大于等于劳务费，工会经费，福利费，税金及附加费用");
                    return false
                }
                 if (parseInt(postData.expend_subsidy) < (parseInt(postData.expend_retire) + parseInt(postData.expend_medical))) {
                    $("#expend_subsidy").parent().parent().addClass("has-error")
                    $("#expend_retire").parent().parent().addClass("has-error")
                    $("#expend_medical").parent().parent().addClass("has-error")
                    toastr.error("对个人和家庭的补助必须大于等于退（离）休费和医疗费补助之和");
                    return false
                }

                var next_url = '/edit_611_6/{{ cid }}/';

                $.post('/edit_611_5/{{ cid }}/?next=' + next_url, postData, function (res) {
                    console.log(res);
                    if (res.code == 0) {

                        toastr.success("保存成功");
                        window.setTimeout(function () {
                            window.location.reload()
                        }, 2000);

                    } else {
                        for (var msg1 in res.msg) {
                            toastr.error(msg1 + "," + res.msg[msg1]);
                        }
                    }
                }).fail(function (jqXHR, textStatus, errorThrown) {
                    toastr.error('提交失败请稍后重试');
                });
                return false;
            })

        });

    </script>

{% endblock %}